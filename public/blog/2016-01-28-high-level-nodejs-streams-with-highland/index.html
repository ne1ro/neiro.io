<!DOCTYPE html>
<html lang="en-GB">

<head>
  <meta http-equiv="X-Clacks-Overhead" content="GNU Terry Pratchett" />
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="shortcut icon" href="https://neiro.io/images/favicon.png" />
<title>High level Node.JS streams | neiro blog</title>
<meta name="title" content="High level Node.JS streams" />
<meta name="description" content="Node.js has a simple and powerful stream API. Streams in Node.js are
unix pipes that let you perform asynchronous I/O operations by reading
source data and pipe it to destination. If your application operates not
with streams only, but promises, callbacks or synchronous code, you may
want to use more deeper abstraction that fits your needs. In this case
you may take a look at Highland.
Highland
Highland library allows you to manage asynchronous and synchronous code
easily both in Node.js and in the browser. With Highland you can simple
switch between synchronous and asynchronous data sources without
re-writing your code. You can install Highland with NPM:" />
<meta name="author" content="[neiro]" />
<meta name="keywords" content="javascript,functional," />






  





  













<meta property="og:title" content="High level Node.JS streams" />
<meta property="og:description" content="Node.js has a simple and powerful stream API. Streams in Node.js are
unix pipes that let you perform asynchronous I/O operations by reading
source data and pipe it to destination. If your application operates not
with streams only, but promises, callbacks or synchronous code, you may
want to use more deeper abstraction that fits your needs. In this case
you may take a look at Highland.
Highland
Highland library allows you to manage asynchronous and synchronous code
easily both in Node.js and in the browser. With Highland you can simple
switch between synchronous and asynchronous data sources without
re-writing your code. You can install Highland with NPM:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://neiro.io/blog/2016-01-28-high-level-nodejs-streams-with-highland/" />

<meta property="og:image" content="https://neiro.io/images/social_card_bg_hu14242020667512382391.webp"/><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2016-01-28T10:00:00+01:00" />
<meta property="article:modified_time" content="2016-01-28T10:00:00+01:00" /><meta property="og:site_name" content="neiro" />




<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://neiro.io/images/social_card_bg_hu14242020667512382391.webp"/>
<meta name="twitter:title" content="High level Node.JS streams"/>
<meta name="twitter:description" content="Node.js has a simple and powerful stream API. Streams in Node.js are
unix pipes that let you perform asynchronous I/O operations by reading
source data and pipe it to destination. If your application operates not
with streams only, but promises, callbacks or synchronous code, you may
want to use more deeper abstraction that fits your needs. In this case
you may take a look at Highland.
Highland
Highland library allows you to manage asynchronous and synchronous code
easily both in Node.js and in the browser. With Highland you can simple
switch between synchronous and asynchronous data sources without
re-writing your code. You can install Highland with NPM:"/>



<meta itemprop="name" content="High level Node.JS streams">
<meta itemprop="description" content="Node.js has a simple and powerful stream API. Streams in Node.js are
unix pipes that let you perform asynchronous I/O operations by reading
source data and pipe it to destination. If your application operates not
with streams only, but promises, callbacks or synchronous code, you may
want to use more deeper abstraction that fits your needs. In this case
you may take a look at Highland.
Highland
Highland library allows you to manage asynchronous and synchronous code
easily both in Node.js and in the browser. With Highland you can simple
switch between synchronous and asynchronous data sources without
re-writing your code. You can install Highland with NPM:"><meta itemprop="datePublished" content="2016-01-28T10:00:00+01:00" />
<meta itemprop="dateModified" content="2016-01-28T10:00:00+01:00" />
<meta itemprop="wordCount" content="464">

<meta itemprop="image" content="https://neiro.io/images/social_card_bg_hu14242020667512382391.webp"/>


<meta itemprop="keywords" content="javascript,functional," />

<meta name="referrer" content="no-referrer-when-downgrade" />

  
  <link href="/herman.min.css" rel="stylesheet">

  
    
    <link href="/syntax.min.css" rel="stylesheet">
  

  

  
</head>

<body>
  <header><a class="skip-link" href="#main-content">Skip to main content</a>

<a href="/" class="title"><h1>neiro blog</h1></a>
<nav>
  <a href="/">Home</a>

  <a href="/blog/">Blog</a>

<a href='https://neiro.io/index.xml'>RSS</a>







</nav>
</header>
  <main id="main-content">

<h1>High level Node.JS streams</h1>
<p class="byline">
  <time datetime='2016-01-28' pubdate>
    2016-01-28
  </time>
  · [neiro]
</p>

<content>
  <p>Node.js has a simple and powerful stream API. Streams in Node.js are
unix pipes that let you perform asynchronous I/O operations by reading
source data and pipe it to destination. If your application operates not
with streams only, but promises, callbacks or synchronous code, you may
want to use more deeper abstraction that fits your needs. In this case
you may take a look at <a href="http://highlandjs.org/">Highland</a>.</p>
<h2 id="highland">Highland</h2>
<p>Highland library allows you to manage asynchronous and synchronous code
easily both in Node.js and in the browser. With Highland you can simple
switch between synchronous and asynchronous data sources without
re-writing your code. You can install Highland with NPM:</p>





<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="ln">1</span><span class="cl"> npm install highland</span></span></code></pre></div><p>and require or import it as yet another Node.js module:</p>





<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="ln">1</span><span class="cl"> <span class="kr">import</span> <span class="nx">_</span> <span class="nx">from</span> <span class="s1">&#39;highland&#39;</span><span class="p">;</span></span></span></code></pre></div><h2 id="general-examples">General examples</h2>
<p>Converting from arrays to Highland Streams:</p>





<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="ln">1</span><span class="cl"> <span class="nx">_</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]).</span><span class="nx">toArray</span><span class="p">(</span><span class="nx">xs</span> <span class="p">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">xs</span><span class="p">));</span>
</span></span><span class="line"><span class="ln">2</span><span class="cl"><span class="c1">// 0, 1, 2
</span></span></span></code></pre></div><p>Map and reduce over a stream:</p>





<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="ln">1</span><span class="cl"> <span class="nx">_</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]).</span><span class="nx">map</span><span class="p">(</span><span class="nx">x</span> <span class="p">=&gt;</span> <span class="nx">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">).</span><span class="nx">reduce</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span>
</span></span><span class="line"><span class="ln">2</span><span class="cl"><span class="nx">b</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">a</span> <span class="o">*</span> <span class="nx">b</span><span class="p">);</span> <span class="c1">// [6]
</span></span></span></code></pre></div><p>Reading files in parallel:</p>





<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="ln">1</span><span class="cl"> <span class="kr">import</span> <span class="nx">fs</span> <span class="nx">from</span> <span class="s1">&#39;fs&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">2</span><span class="cl"><span class="kr">const</span> <span class="nx">readFile</span> <span class="o">=</span>
</span></span><span class="line"><span class="ln">3</span><span class="cl"><span class="sr">/.wrapCallback(fs.readFile); const stream = /</span><span class="p">([</span><span class="s1">&#39;./.babelrc&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="ln">4</span><span class="cl"><span class="s1">&#39;./.eslintrc&#39;</span><span class="p">]).</span><span class="nx">map</span><span class="p">(</span><span class="nx">readFile</span><span class="p">).</span><span class="nx">parallel</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span></span></span></code></pre></div><p>Handling errors:</p>





<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="ln">1</span><span class="cl"> <span class="nx">stream</span><span class="p">.</span><span class="nx">errors</span><span class="p">((</span><span class="nx">err</span><span class="p">,</span> <span class="nx">rethrow</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span> <span class="p">});</span></span></span></code></pre></div><p>Pipe to Node.js streams:</p>





<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="ln">1</span><span class="cl"> <span class="nx">stream</span><span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">outputStream</span><span class="p">);</span></span></span></code></pre></div><h2 id="stream-objects">Stream objects</h2>
<p>Constructor:</p>





<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="ln">1</span><span class="cl"> <span class="kr">const</span> <span class="nx">stream</span> <span class="o">=</span> <span class="nx">_</span><span class="p">(</span><span class="nx">source</span><span class="p">);</span> <span class="c1">// source - Array/Generator/Node Stream/Event Emitter/Promise/Iterator/Iterable
</span></span></span></code></pre></div><p>General functions:</p>





<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="ln">1</span><span class="cl"><span class="nx">stream</span><span class="p">.</span><span class="nx">destroy</span><span class="p">();</span> <span class="nx">stream</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</span></span><span class="line"><span class="ln">2</span><span class="cl"><span class="nx">stream</span><span class="p">.</span><span class="nx">pause</span><span class="p">();</span> <span class="nx">stream</span><span class="p">.</span><span class="nx">resume</span><span class="p">();</span> <span class="nx">stream</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span> <span class="c1">// Write x value to
</span></span></span><span class="line"><span class="ln">3</span><span class="cl"><span class="c1"></span><span class="nx">stream</span></span></span></code></pre></div><h2 id="transformations">Transformations</h2>





<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="ln"> 1</span><span class="cl"> <span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]).</span><span class="nx">append</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span> <span class="c1">// [0, 1, 2, 3]
</span></span></span><span class="line"><span class="ln"> 2</span><span class="cl"><span class="c1"></span> <span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">]).</span><span class="nx">compact</span><span class="p">();</span> <span class="c1">// [1, 2]
</span></span></span><span class="line"><span class="ln"> 3</span><span class="cl"><span class="c1"></span> <span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">]).</span><span class="nx">filter</span><span class="p">(</span><span class="nx">x</span> <span class="p">=&gt;</span> <span class="nx">x</span>
</span></span><span class="line"><span class="ln"> 4</span><span class="cl"><span class="o">&lt;=</span> <span class="mi">3</span><span class="p">);</span> <span class="c1">// [1, 2]
</span></span></span><span class="line"><span class="ln"> 5</span><span class="cl"><span class="c1"></span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]).</span><span class="nx">head</span><span class="p">();</span> <span class="c1">// 1
</span></span></span><span class="line"><span class="ln"> 6</span><span class="cl"><span class="c1"></span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]).</span><span class="nx">last</span><span class="p">();</span> <span class="c1">// 3
</span></span></span><span class="line"><span class="ln"> 7</span><span class="cl"><span class="c1"></span><span class="p">([</span><span class="s1">&#39;ABC&#39;</span><span class="p">]).</span><span class="nx">invoke</span><span class="p">(</span><span class="s1">&#39;toLowerCase&#39;</span><span class="p">,</span> <span class="p">[]);</span> <span class="c1">// abc
</span></span></span><span class="line"><span class="ln"> 8</span><span class="cl"><span class="c1"></span><span class="p">([{</span> <span class="nx">foo</span><span class="o">:</span> <span class="s1">&#39;bar&#39;</span> <span class="p">}]).</span><span class="nx">pick</span><span class="p">([</span><span class="s1">&#39;foo&#39;</span><span class="p">]);</span> <span class="c1">// { foo: &#39;bar&#39; }
</span></span></span><span class="line"><span class="ln"> 9</span><span class="cl"><span class="c1"></span><span class="p">([{</span> <span class="nx">foo</span><span class="o">:</span> <span class="s1">&#39;bar&#39;</span> <span class="p">}]).</span><span class="nx">pluck</span><span class="p">([</span><span class="s1">&#39;foo&#39;</span><span class="p">]);</span> <span class="c1">// bar
</span></span></span><span class="line"><span class="ln">10</span><span class="cl"><span class="c1"></span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]).</span><span class="nx">slice</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span> <span class="c1">// [2, 3]
</span></span></span><span class="line"><span class="ln">11</span><span class="cl"><span class="c1"></span><span class="p">([</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">]).</span><span class="nx">sort</span><span class="p">();</span> <span class="c1">// [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]
</span></span></span><span class="line"><span class="ln">12</span><span class="cl"><span class="c1"></span><span class="nx">_</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]).</span><span class="nx">uniq</span><span class="p">();</span> <span class="c1">// [0, 2, 3]
</span></span></span></code></pre></div><h2 id="high-order-streams">High-order Streams</h2>





<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="ln">1</span><span class="cl"><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]).</span><span class="nx">concat</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]);</span> <span class="c1">// [0, 1, 2, 3]
</span></span></span><span class="line"><span class="ln">2</span><span class="cl"><span class="c1"></span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">3</span><span class="p">]]]).</span><span class="nx">flatten</span><span class="p">();</span> <span class="c1">// [0, 1, 2, 3]
</span></span></span><span class="line"><span class="ln">3</span><span class="cl"><span class="c1"></span><span class="p">(</span><span class="sr">/([0, 1]), /</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])).</span><span class="nx">sequence</span><span class="p">();</span> <span class="c1">// [0, 1, 2, 3]
</span></span></span><span class="line"><span class="ln">4</span><span class="cl"><span class="c1"></span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">]).</span><span class="nx">zip</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]);</span> <span class="c1">// =&gt; [&#39;a&#39;, 1], [&#39;b&#39;, 2]
</span></span></span><span class="line"><span class="ln">5</span><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="ln">6</span><span class="cl"><span class="kr">const</span> <span class="nx">fork</span> <span class="o">=</span> <span class="nx">stream</span><span class="p">.</span><span class="nx">fork</span><span class="p">();</span> <span class="kr">const</span> <span class="nx">observer</span> <span class="o">=</span> <span class="nx">stream</span><span class="p">.</span><span class="nx">observe</span><span class="p">();</span>
</span></span><span class="line"><span class="ln">7</span><span class="cl"><span class="nx">fork</span><span class="p">.</span><span class="nx">resume</span><span class="p">();</span></span></span></code></pre></div><h2 id="objects">Objects</h2>





<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="ln">1</span><span class="cl"> <span class="p">.</span><span class="nx">extend</span><span class="p">({</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;foo&#39;</span> <span class="p">},</span> <span class="p">{</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;obj&#39;</span> <span class="p">});</span>
</span></span><span class="line"><span class="ln">2</span><span class="cl"><span class="c1">// { name: &#39;foo&#39;, type: &#39;obj&#39; }
</span></span></span><span class="line"><span class="ln">3</span><span class="cl"><span class="c1"></span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">foo</span><span class="o">:</span> <span class="s1">&#39;bar&#39;</span> <span class="p">});</span> <span class="c1">// bar
</span></span></span><span class="line"><span class="ln">4</span><span class="cl"><span class="c1"></span><span class="p">.</span><span class="nx">keys</span><span class="p">({</span> <span class="nx">foo</span><span class="o">:</span> <span class="s1">&#39;bar&#39;</span> <span class="p">});</span> <span class="c1">// [&#39;foo&#39;]
</span></span></span><span class="line"><span class="ln">5</span><span class="cl"><span class="c1"></span><span class="p">.</span><span class="nx">values</span><span class="p">({</span> <span class="nx">foo</span><span class="o">:</span> <span class="s1">&#39;bar&#39;</span> <span class="p">});</span> <span class="c1">// [&#39;bar&#39;]
</span></span></span><span class="line"><span class="ln">6</span><span class="cl"><span class="c1"></span><span class="nx">_</span><span class="p">.</span><span class="nx">pairs</span><span class="p">({</span> <span class="nx">foo</span><span class="o">:</span> <span class="s1">&#39;bar&#39;</span> <span class="p">});</span> <span class="c1">// [&#39;foo&#39;, &#39;bar&#39;]
</span></span></span></code></pre></div><h2 id="utils">Utils</h2>





<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-javascript" data-lang="javascript"><span class="line"><span class="ln">1</span><span class="cl"><span class="p">.</span><span class="nx">isStream</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]);</span> <span class="c1">// false
</span></span></span><span class="line"><span class="ln">2</span><span class="cl"><span class="c1"></span><span class="p">.</span><span class="nx">isStream</span><span class="p">(</span><span class="nx">stream</span><span class="p">);</span> <span class="c1">// true
</span></span></span><span class="line"><span class="ln">3</span><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="ln">4</span><span class="cl"><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]).</span><span class="nx">each</span><span class="p">(.</span><span class="nx">log</span><span class="p">);</span> <span class="c1">// 1, 2, 3
</span></span></span><span class="line"><span class="ln">5</span><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="ln">6</span><span class="cl"><span class="kr">const</span> <span class="nx">readFile</span> <span class="o">=</span> <span class="p">.</span><span class="nx">wrapCallback</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">readFile</span><span class="p">);</span> <span class="c1">// Wraps callback to Highland stream
</span></span></span><span class="line"><span class="ln">7</span><span class="cl"><span class="c1"></span><span class="p">.</span><span class="nx">isStream</span><span class="p">(</span><span class="nx">readFile</span><span class="p">);</span> <span class="c1">// true
</span></span></span></code></pre></div><h2 id="conclusion">Conclusion</h2>
<p>If you need to handle your synchronous and asynchronous data with
differrent abstractions in one way, operate with Node.js streams at
higher level, you can use Highland high-level streams library to fit
your needs. You can find more at <a href="http://highlandjs.org/">Highland
docs</a>.</p>

</content>
<p>
  
    <a class="blog-tags" href="/tags/javascript/">#javascript</a>
  
    <a class="blog-tags" href="/tags/functional/">#functional</a>
  
</p>




  </main>
  <footer><small>
  neiro © 2012-2025 | Made with <a href="https://github.com/clente/hugo-bearcub">Bear Cub</a>
</small></footer>

    
</body>

</html>
